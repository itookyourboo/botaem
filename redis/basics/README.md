# Основы Redis

Redis как в памяти хранилище данных, его структуры данных и основные команды.

---

## Что это

Redis является одним из самых популярных в памяти хранилищем данных, которое используется для различных задач, включая кэширование, сессионное хранилище, очереди заданий и многое другое. Он отличается высокой производительностью и масштабируемостью, что делает его очень популярным среди разработчиков.

## Структуры данных

Redis поддерживает несколько структур данных, которые позволяют хранить и организовывать данные в различных форматах. Ниже мы рассмотрим основные структуры данных, которые поддерживаются Redis.

1. **Strings** (Строки) - это наиболее простая структура данных Redis. Она позволяет хранить строки, числа и бинарные данные. Эта структура данных поддерживает множество операций, в том числе получение, установка и удаление значений.

1. **Lists** (Списки) - это упорядоченные наборы элементов. Списки могут содержать до `2^32 - 1` элементов и поддерживают операции добавления, удаления и получения элементов из списка.

1. **Sets** (Множества) - это неупорядоченные коллекции уникальных элементов. Они поддерживают операции добавления, удаления и проверки наличия элементов.

1. **Sorted Sets** (Сортированные множества) - это множества, в которых каждый элемент имеет свой собственный рейтинг. Они поддерживают операции добавления, удаления и получения элементов, а также получения элементов в диапазоне рейтинга.

1. **Hashes** (Хэши) - это структуры данных, которые хранят набор полей и значений. Хэши поддерживают операции добавления, удаления и получения значений.

## Основные команды

1. GET - получение значения по ключу.
1. SET - установка значения по ключу.
1. DEL - удаление ключа и его значения.
1. INCR - увеличение значения ключа на 1.
1. DECR - уменьшение значения ключа на 1.
1. LPUSH - добавление элемента в начало списка.
1. RPUSH - добавление элемента в конец списка.
1. LPOP - удаление первого элемента списка.
1. RPOP - удаление последнего элемента списка.
1. LRANGE - получение элементов списка.
1. SADD - добавление элемента в множество.
1. SREM - удаление элемента из множества.
1. SMEMBERS - получение всех элементов множества.
1. ZADD - добавление элемента в сортированное множество.
1. ZRANGE - получение элементов из сортированного множества в заданном диапазоне.
1. HSET - установка значения поля хэша.
1. HGET - получение значения поля хэша.

Redis также поддерживает множество других команд, включая команды для работы с транзакциями, пакетными операциями и многое другое.

## Установка с помощью Docker

### Загрузка образа Redis

Чтобы загрузить образ Redis, выполните следующую команду:

```shell
docker pull redis
```

Эта команда загрузит последнюю версию образа Redis из Docker Hub и сохранит его локально на вашей машине.

### Запуск контейнера Redis

Чтобы запустить контейнер Redis, выполните следующую команду:

```shell
docker run --name my-redis -d redis
```

Эта команда запускает новый контейнер Redis в фоновом режиме и назначает ему имя "my-redis". Флаг `-d` указывает Docker запустить контейнер в фоновом режиме.

### Проверка работоспособности контейнера

Чтобы проверить, что контейнер Redis запущен и работает правильно, мы можем выполнить команду `docker ps`, которая показывает список запущенных контейнеров на нашей машине.

```shell
docker ps
```

Вы должны увидеть контейнер Redis с именем "my-redis" в списке.

## Использование

Теперь, когда контейнер Redis запущен, мы можем использовать его для хранения и получения данных. Для подключения к Redis в контейнере, мы можем использовать любой инструмент или библиотеку Redis, которая поддерживает подключение к Redis по IP-адресу и порту.

Например, если вы хотите подключиться к Redis в контейнере через терминал, вы можете выполнить следующую команду:

```shell
docker exec -it my-redis redis-cli
```

Эта команда подключает вас к Redis в контейнере и открывает интерактивный терминал Redis CLI. Теперь вы можете использовать Redis CLI для выполнения команд Redis, таких как `SET`, `GET`, `LPUSH`, `LPOP` и других.

## Остановка и удаление контейнера

Когда вы закончите использование контейнера Redis, вы можете остановить его с помощью команды `docker stop`, а затем удалить с помощью команды `docker rm`.

Чтобы остановить контейнер Redis, выполните следующую команду:

```shell
docker stop my-redis
```

Чтобы удалить контейнер Redis, выполните следующую команду:

```shell
docker rm my-redis
```

---

# Практическое задание

Подключитесь к Redis с помощью redis-cli и проделайте следующие действия:

1. Создайте новый ключ "my_key" со значением "Hello, Redis!"
1. Получите значение ключа "my_key" и выведите его на экран.
1. Используя команду `LPUSH`, создайте новый список "my_list" и добавьте в него элементы "apple", "banana" и "orange".
1. Используя команду `LPOP`, удалите первый элемент списка "my_list".
1. Получите все элементы списка "my_list" и выведите их на экран.
1. Создайте новое множество "my_set" и добавьте в него элементы "red", "green" и "blue".
1. Используя команду `SREM`, удалите элемент "green" из множества "my_set".
1. Получите все элементы множества "my_set" и выведите их на экран.
1. Создайте новое сортированное множество "my_sorted_set" и добавьте в него элементы "John" с рейтингом 50, "Mike" с рейтингом 25 и "Sara" с рейтингом 75.
1. Получите все элементы сортированного множества "my_sorted_set" в порядке возрастания рейтинга и выведите их на экран.
1. Используя команду `HSET`, создайте новый хэш "my_hash" с полями "name" и "age" и установите соответствующие значения "John Smith" и "30".
1. Получите значения поля "name" в хэше "my_hash" и выведите их на экран.
1. Удалите ключ "my_key" из Redis.

<details>
<summary>Решение</summary>
<pre><code lang="redis">
127.0.0.1:6379> SET my_key "Hello, Redis!"
OK
127.0.0.1:6379> GET my_key
"Hello, Redis!"
127.0.0.1:6379> LPUSH my_list apple banana orange
(integer) 3
127.0.0.1:6379> LPOP my_list
"orange"
127.0.0.1:6379> LRANGE my_list 0 -1
1) "banana"
2) "apple"
127.0.0.1:6379> SADD my_set red green blue
(integer) 3
127.0.0.1:6379> SMEMBERS my_set
1) "green"
2) "red"
3) "blue"
127.0.0.1:6379> SREM my_set green
(integer) 1
127.0.0.1:6379> ZADD my_sorted_set 50 John 25 Mike 75 Sara
(integer) 3
127.0.0.1:6379> ZRANGE my_sorted_set 0 -1
1) "Mike"
2) "John"
3) "Sara"
127.0.0.1:6379> ZRANGE my_sorted_set 0 -1 REV
1) "Sara"
2) "John"
3) "Mike"
127.0.0.1:6379> HSET my_hash name "John Smith" age 30
(integer) 2
127.0.0.1:6379> HGET my_hash name
"John Smith"
127.0.0.1:6379> DEL my_key
(integer) 1
</code></pre>
</details>
